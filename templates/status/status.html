{% extends 'index.html' %}
{% load static %}

{% block container %}

    {% if servers_context %}

        <h2>Latest Status</h2>
        <table>
        <tr>
            <th>Owner</th>
            <th>Server</th>
            <th>Expired</th>
        </tr>

        {% for server in servers_context %}
            <tr>
                <td>{{ server.owner }}</td>
                <td>{{ server.name }}</td>
                <td>
                    {% if not server.expired_inbounds %}
                        All users are enable
                    {% elif server.expired_inbounds == "ERROR" %}
                        Can't connect to server
                    {% else %}
                        {% for inbound in server.expired_inbounds %}
                            {{ inbound.remaining_status }},
                        {% endfor %}
                    {% endif %}
                </td>
            </tr>
        {% endfor %}

    {% else %}
        <h1>{{ request.user }}, Ready to Check...</h1>
    {% endif %}

</table>
    <div class="button-container">
        <button class="button primary-button" onclick="location.href='{% url 'check_status' %}{{ '?start=true' }}'">
            Check
        </button>
        <button class="button dead-button" onclick="location.href='{% url 'dashboard' %}'">
            Back
        </button>
    </div>
{% endblock container %}
